<?xml version="1.0" encoding="utf-8"?>
<xdm:Root modelVersion="5" xsi:schemaLocation="http://schemas.croc.ru/XFW3/DslMetadataLayer/1.0 x-domain-model-dsl-schema.xsd http://schemas.croc.ru/XFW3/Data/1.0 x-domain-model-storage-schema.xsd http://schemas.croc.ru/XFW3/DomainEngineerLayer/1.0 x-domain-objects-engineer-schema.xsd http://schemas.croc.ru/XFW3/DomainObjectPresentationLayer/1.0 x-domain-objects-presentation-schema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xdm="http://schemas.croc.ru/XFW3/DSLModel/1.0">
	<xdm:Settings>
		<xdm:Property Name="MetadataFileName" Value="..\Metadata\Metadata.xml" />
		<xdm:Property Name="DomainClassesFileName" Value="..\DomainObjects\GeneratedDomainObjects.cs" />
		<xdm:Property Name="DomainClassesSchemasPath" Value="" />
		<xdm:Property Name="DomainClassesNamespace" Value="<%= rootNs %>.DomainObjects" />
		<xdm:Property Name="PreprocessorsOrder" Value="" />
		<xdm:Property Name="SplitByFiles" Value="ExistentFiles" />
		<xdm:Property Name="GenerateAbstractClasses" Value="False" />
		<xdm:Property Name="GenerateNameTypes" Value="False" />
		<xdm:Property Name="GenerateMetaProperties" Value="False" />
		<xdm:Property Name="JsDomainClassesFileName" Value="..\<%= clientProjectPath %>\src\app\domain\model-meta.js" />
		<xdm:Property Name="JsDomainExtClassesFileName" Value="..\<%= clientProjectPath %>\src\app\domain\model-meta-ext.js" />
	</xdm:Settings>
	<xdm:Model>
		<ctrl:Metadata xmlns:ctrl="http://schemas.croc.ru/XFW3/MetadataControl/1.0">
			<ctrl:Provider Namespace="http://schemas.croc.ru/XFW3/Data/1.0" Type="Croc.XFW3.Storage.Metadata.XStorageMetadataXmlProvider, Croc.XFW3.Storage" />
			<ctrl:Provider Namespace="http://schemas.croc.ru/XFW3/DslMetadataLayer/1.0" Type="Croc.XFW3.DomainModelDefinitionLanguage.Metadata.DslLayerMetadataProvider, Croc.XFW3.DomainModelDefinitionLanguage.Dsl" />
			<ctrl:Provider Namespace="http://schemas.croc.ru/XFW3/DomainEngineerLayer/1.0" Type="Croc.XFW3.Domain.Objects.Metadata.XDomainEngineerMetadataProvider, Croc.XFW3.Interop" />
			<ctrl:Provider Namespace="http://schemas.croc.ru/XFW3/DomainObjectPresentationLayer/1.0" Type="Croc.XFW3.Domain.Objects.Metadata.XPresentationLayerMetadataProvider, Croc.XFW3.Interop" />
			<dm:DomainModel xmlns:dm="http://schemas.croc.ru/XFW3/DomainModel/1.0">
				<dm:EntityType Name="User" Desc="Пользователь" Persistence="Full">
					<dm:Property Name="FirstName" Desc="Имя" Type="String" MaxLength="256" />
					<dm:Property Name="LastName" Desc="Фамилия" Type="String" MaxLength="256" />
					<dm:Property Name="Login" Desc="Логин" Type="String" MaxLength="128" />
					<dm:Property Name="Created" Desc="Создан" Type="DateTime" Nullable="true" />
					<dm:Property Name="Password" Desc="Пароль" Type="String" Nullable="true" MaxLength="64" />
				</dm:EntityType>
				<dm:MessageTemplates>
					<dm:OnPropertyNotNullViolation>
						<dm:Message Text="Значение реквизита '{OwnerType.Desc}.{Desc}' должно быть задано." />
					</dm:OnPropertyNotNullViolation>
					<dm:OnPropertyEnumerationViolation>
						<dm:Message Text="Значение реквизита '{OwnerType.Desc}.{Desc}' должно быть одно из : {Enum.Values}" />
					</dm:OnPropertyEnumerationViolation>
					<dm:OnPropertyFlagEnumerationViolation>
						<dm:Message Text="Значение реквизита '{OwnerType.Desc}.{Desc}' должно быть из множества '{Enum.Desc}', битовая маска - {Enum.Mask}" />
					</dm:OnPropertyFlagEnumerationViolation>
					<dm:OnSingleUniqueConstraintViolation>
						<dm:Message Text="Нарушение уникальности реквизита '{OwnerType.Desc}.{PropRefs.First.Desc}'." />
					</dm:OnSingleUniqueConstraintViolation>
					<dm:OnMultipleUniqueConstraintViolation>
						<dm:Message Text="Нарушение уникального индекса. Для объекта {OwnerType.Desc} сочетание реквизитов {PropRefs.List} должно быть уникальным" />
					</dm:OnMultipleUniqueConstraintViolation>
					<dm:OnSelfReference>
						<dm:Message Text="Объект '{OwnerType.Desc}' не может ссылаться на себя в значении реквизита '{Desc}'" />
					</dm:OnSelfReference>
					<dm:OnMinMaxViolation>
						<dm:CompositeMessage Text="Значение реквизита '{OwnerType.Desc}.{Desc}' должно быть">
							<dm:Param Name="MinInclusive" Text="больше или равно {MinInclusive}" />
							<dm:Param Name="MinExclusive" Text="больше {MinExclusive}" />
							<dm:Param Name="MaxInclusive" Text="меньше или равно {MaxInclusive}" />
							<dm:Param Name="MaxExclusive" Text="меньше {MaxExclusive}" />
							<dm:Param Name="And" Text="и" />
						</dm:CompositeMessage>
					</dm:OnMinMaxViolation>
					<dm:OnLengthViolation>
						<dm:CompositeMessage Text="Длина значения реквизита '{OwnerType.Desc}.{Desc}' должна быть">
							<dm:Param Name="MinLength" Text="не меньше {MinLength}" />
							<dm:Param Name="MaxLength" Text="не больше {MaxLength}" />
							<dm:Param Name="And" Text="и" />
						</dm:CompositeMessage>
					</dm:OnLengthViolation>
					<dm:OnNumberFormatViolation>
						<dm:CompositeMessage Text="В значении реквизита '{OwnerType.Desc}.{Desc}' должно быть">
							<dm:Param Name="TotalDigits" Text="не больше {TotalDigits} цифр" />
							<dm:Param Name="FractionDigits" Text="не больше {FractionDigits} цифр после запятой" />
							<dm:Param Name="And" Text="и" />
						</dm:CompositeMessage>
					</dm:OnNumberFormatViolation>
					<dm:OnReferenceViolation>
						<dm:Message Text="На  объект '{ValueType.Desc}' ссылается '{OwnerType.Desc}.{Desc}'." />
						<dm:Message Name="Delete" Text="Объект '{ValueType.Desc}' не может быть удален, т.к. на него ссылается '{OwnerType.Desc}.{Desc}'." />
						<dm:Message Name="Save" Text="Объект выбранный в качестве значения свойства '{OwnerType.Desc}.{Desc}' не существует или был удален." />
					</dm:OnReferenceViolation>
					<dm:OnCascadeReferenceViolation>
						<dm:Message Text="В результате каскадных изменений был затронут объект '{ValueType.Desc}', на который ссылается '{OwnerType.Desc}.{Desc}'." />
						<dm:Message Name="Delete" Text="В результате каскадного удаления должен быть удален объект '{ValueType.Desc}'. Однако его удаление невозможно, т.к. на него ссылается '{OwnerType.Desc}.{Desc}'." />
					</dm:OnCascadeReferenceViolation>
					<dm:OnIdentityViolation>
						<dm:Message Text="Нарушение уникальности идентификатора объекта типа '{Type.Desc}'" />
					</dm:OnIdentityViolation>
				</dm:MessageTemplates>
				<StorageConfig xmlns="http://schemas.croc.ru/XFW3/Data/1.0">
					<Storage Name="Main" Default="true">
						<StorageImpl Alias="<%= storage.type %>" Provider="<%= storage.providerName %>" />
					</Storage>
				</StorageConfig>
			</dm:DomainModel>
		</ctrl:Metadata>
	</xdm:Model>
</xdm:Root>