<?xml version="1.0" encoding="utf-8" ?>
<configuration>
	<configSections>
		<section name="croc.xfw3.appconfig" type="Croc.XFW3.Core.Configuration.XConfigurationData, Croc.XFW3.Core" />
	</configSections>

	<croc.xfw3.appconfig xmlns="http://schemas.croc.ru/XFW3/Config/1.0">
		<application name="server" debug="true">
			<building parallel="false" />
			<subsystems>

				<!-- Storage subsystem -->
				<subsystem xmlns="http://schemas.croc.ru/XFW3/2009/10/Storage/Config">
					<storage
						name="Main"
 						provider-type="<%= storage.providerType %>">
						<connections>
							<connection name="default" features="read;update" default="true">
								<connection-string text="<%= storage.connections.default %>" />
							</connection>
							<connection name="initialization">
								<connection-string text="<%= storage.connections.initialization %>" />
							</connection>

						</connections>
						<parameters>
							<commandTimeout value="5" />
						</parameters>
						<!-- behavior="AlwaysRecreate|Validate|Update|Append" -->
						<initialization enabled="true" behavior="Update" connection-name="initialization"/>
					</storage>
				</subsystem>

				<!-- Domain subsystem -->
				<subsystem xmlns="http://schemas.croc.ru/XFW3/2009/10/Domain/Config">
					<model>
						<sources>
							<add
								name="arms domain"
								type="Croc.XFW3.Domain.Configuration.XMetadataXmlSource, Croc.XFW3.DomainObjects"
								source="Metadata\metadata.xml"
							/>
						</sources>
					</model>
					<interaction
						session-factory="Croc.XFW3.DomainObjects.Server.XLocalSessionFactory, Croc.XFW3.Server"
						read-session-connection-feature="read"
						update-session-connection-feature="update"
					/>
					<implementation factory-provider="<%= rootNs %>.DomainObjects.Factories.FactoryProvider, <%= assemblyName %>" />
				</subsystem>

				<!-- DataSources subsystem -->
				<subsystem xmlns="http://schemas.croc.ru/XFW3/2009/10/DataSources/Config">
					<sources>
						<add
							name="data-sources"
							type="Croc.XFW3.DataSources.Configuration.XDsMetadataXmlSource, Croc.XFW3.DataSources"
							source="Metadata\data-sources.xml"
						/>
					</sources>
				</subsystem>

				<!-- Security subsystem -->
				<!--
				<subsystem xmlns="http://schemas.croc.ru/XFW3/2009/10/Security/Config">
					<user-provider type="<%= rootNs %>.Security.UserProvider, <%= assemblyName %>" />
					<az-manager type="<%= rootNs %>.Security.AzManager, <%= assemblyName %>"/>
				</subsystem>
				-->

				<!-- Reporting subsystem -->
				<!--
				<subsystem xmlns="http://schemas.croc.ru/XFW3/2009/10/Reporting/Config">
					<styles>
						<add source="Reports\rs-default-styles.xml" />
					</styles>
					<report-providers>
						<add path="ReportsCustom" loadOnStart="true" monitorChanges="true"  />
					</report-providers>
					<caching xslfoCacheMaxSizeBytes="31457280">
						<profile enable="false" loadOnStart="false" monitorChanges="false" />
					</caching>
					<schemas>
						<add source="Reports\Croc.XmlFramework.ReportService.xsd" />
					</schemas>

					<output-formats>
						<add name="HTML"
										 type="Croc.XmlFramework.ReportService.ReportRenderer.Core.HTMLRenderer, Croc.XmlFramework.ReportService.ReportRenderer.Core"
										 content-type="text/html"
										 custom-data="Reports\x-fo2html.xsl" />
						<add name="PDF"
										 type="Croc.XmlFramework.ReportService.ReportRenderer.Word.XslFo2WordRenderer, Croc.XmlFramework.ReportService.ReportRenderer.Word"
										 content-type="application/pdf"
										 format-extension="pdf"
										 custom-data="Pdf" />
						<add name="WORD"
										type="Croc.XmlFramework.ReportService.ReportRenderer.Word.XslFo2WordRenderer, Croc.XmlFramework.ReportService.ReportRenderer.Word"
										content-type="application/msword"
										format-extension="doc" />
						<add name="XPS"
										type="Croc.XmlFramework.ReportService.ReportRenderer.Word.XslFo2WordRenderer, Croc.XmlFramework.ReportService.ReportRenderer.Word"
										content-type="application/vnd.ms-xpsdocument"
										format-extension="xps"
										custom-data="Xps" />
						<add name="EXCEL"
										type="Croc.XmlFramework.ReportService.ReportRenderer.Excel.MSExcelRenderer, Croc.XmlFramework.ReportService.ReportRenderer.Excel"
										content-type="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
										custom-data="Xlsx"
										format-extension="xlsx" />
						<add name="XSL-FO"
										type="Croc.XmlFramework.ReportService.ReportRenderer.Core.FORenderer,Croc.XmlFramework.ReportService.ReportRenderer.Core"
										content-type="text/xml"
										format-extension="xml" />
					</output-formats>

					<diagnostics>
						<makeReport log="true" />
					</diagnostics>
				</subsystem>
				-->

			</subsystems>
		</application>
	</croc.xfw3.appconfig>
</configuration>
